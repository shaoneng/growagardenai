# Cloudflare Pages éƒ¨ç½²é…ç½®å®ŒæˆçŠ¶æ€

## ğŸ‰ ç¬¬ä¸€é˜¶æ®µä»»åŠ¡å®Œæˆï¼

æˆ‘ä»¬å·²ç»æˆåŠŸå®Œæˆäº† Cloudflare Pages éƒ¨ç½²ä¼˜åŒ–çš„ç¬¬ä¸€é˜¶æ®µä»»åŠ¡ï¼š

### âœ… å·²å®Œæˆçš„ä»»åŠ¡

#### 1.1 åˆ›å»º Wrangler é…ç½®æ–‡ä»¶
- âœ… åˆ›å»ºäº† `wrangler.toml` é…ç½®æ–‡ä»¶
- âœ… é…ç½®äº†ç”Ÿäº§å’Œé¢„è§ˆç¯å¢ƒ
- âœ… è®¾ç½®äº†å…¼å®¹æ€§æ ‡å¿—å’Œæ—¥æœŸ
- âœ… æ·»åŠ äº†ç¯å¢ƒå˜é‡é…ç½®æ¨¡æ¿

#### 1.2 åˆ›å»º Cloudflare Pages é…ç½®æ–‡ä»¶  
- âœ… åˆ›å»ºäº† `_headers` æ–‡ä»¶é…ç½® HTTP å¤´
- âœ… åˆ›å»ºäº† `_redirects` æ–‡ä»¶é…ç½®é‡å®šå‘è§„åˆ™
- âœ… è®¾ç½®äº†ç¼“å­˜ç­–ç•¥å’Œå®‰å…¨å¤´
- âœ… é…ç½®äº† SPA å›é€€è§„åˆ™

#### 1.3 ä¼˜åŒ– Next.js é…ç½®
- âœ… æ›´æ–°äº† `next.config.ts` æ·»åŠ  Cloudflare ç‰¹å®šä¼˜åŒ–
- âœ… é…ç½®äº†å›¾ç‰‡ä¼˜åŒ–å’Œæ€§èƒ½å‚æ•°
- âœ… æ·»åŠ äº†å®‰å…¨å¤´å’Œé‡å®šå‘é…ç½®
- âœ… ä¿®å¤äº† Edge Runtime å…¼å®¹æ€§é—®é¢˜

#### 2.1 æ›´æ–° package.json æ„å»ºè„šæœ¬
- âœ… æ·»åŠ äº† `build:cf` è„šæœ¬ä½¿ç”¨ next-on-pages
- âœ… æ·»åŠ äº† `preview:cf` è„šæœ¬æœ¬åœ°é¢„è§ˆ
- âœ… æ·»åŠ äº† `deploy:cf` è„šæœ¬è‡ªåŠ¨éƒ¨ç½²
- âœ… ä¼˜åŒ–äº†ç°æœ‰æ„å»ºå’Œæµ‹è¯•è„šæœ¬

#### 2.2 åˆ›å»º Edge Runtime è‡ªåŠ¨é…ç½®è„šæœ¬
- âœ… ç¼–å†™äº† `scripts/configure-edge-runtime.js`
- âœ… è‡ªåŠ¨æ£€æµ‹åŠ¨æ€è·¯ç”±å¹¶æ·»åŠ  Edge Runtime é…ç½®
- âœ… éªŒè¯äº†æ‰€æœ‰ API è·¯ç”±çš„ Edge Runtime å…¼å®¹æ€§
- âœ… ä¿®å¤äº† Edge Runtime é…ç½®å†²çª

#### 2.3 åˆ›å»ºæ„å»ºéªŒè¯å·¥å…·
- âœ… ç¼–å†™äº† `scripts/build-validator.js`
- âœ… éªŒè¯ Edge Runtime é…ç½®å®Œæ•´æ€§
- âœ… æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
- âœ… éªŒè¯æ„å»ºè¾“å‡ºç»“æ„

## ğŸ”§ åˆ›å»ºçš„æ–‡ä»¶

### é…ç½®æ–‡ä»¶
- `wrangler.toml` - Cloudflare Workers é…ç½®
- `_headers` - HTTP å¤´é…ç½®
- `_redirects` - é‡å®šå‘è§„åˆ™
- `.env.example` - ç¯å¢ƒå˜é‡ç¤ºä¾‹
- `.env.local` - æœ¬åœ°ç¯å¢ƒå˜é‡ï¼ˆæµ‹è¯•ç”¨ï¼‰

### è„šæœ¬æ–‡ä»¶
- `scripts/configure-edge-runtime.js` - Edge Runtime è‡ªåŠ¨é…ç½®
- `scripts/build-validator.js` - æ„å»ºéªŒè¯å·¥å…·
- `scripts/deploy.sh` - è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬

### ä¼˜åŒ–çš„æ–‡ä»¶
- `next.config.ts` - æ·»åŠ  Cloudflare Pages ä¼˜åŒ–
- `package.json` - æ›´æ–°æ„å»ºè„šæœ¬
- åŠ¨æ€è·¯ç”±æ–‡ä»¶ - ä¿®å¤ Edge Runtime é…ç½®

## ğŸš€ å½“å‰çŠ¶æ€

### âœ… æ„å»ºçŠ¶æ€
- **Next.js æ„å»º**: âœ… æˆåŠŸ
- **Edge Runtime é…ç½®**: âœ… æ‰€æœ‰åŠ¨æ€è·¯ç”±å·²é…ç½®
- **æ„å»ºéªŒè¯**: âœ… é€šè¿‡æ‰€æœ‰æ£€æŸ¥
- **æ–‡ä»¶å¤§å°**: âœ… ç¬¦åˆ Cloudflare é™åˆ¶

### âš ï¸ å¾…è§£å†³é—®é¢˜
- **next-on-pages è½¬æ¢**: âŒ é‡å¤æ ‡è¯†ç¬¦é”™è¯¯ï¼ˆå·²çŸ¥é—®é¢˜ï¼‰
- **ç¯å¢ƒå˜é‡**: âš ï¸ éœ€è¦åœ¨ Cloudflare Pages ä¸­é…ç½®

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¯è¡Œçš„éƒ¨ç½²æ–¹æ¡ˆ
1. **æ‰‹åŠ¨éƒ¨ç½²**: å¯ä»¥ç›´æ¥å°† `.next` æ„å»ºè¾“å‡ºä¸Šä¼ åˆ° Cloudflare Pages
2. **GitHub é›†æˆ**: è¿æ¥ GitHub ä»“åº“ï¼Œè®© Cloudflare Pages è‡ªåŠ¨æ„å»º
3. **Wrangler CLI**: ä½¿ç”¨ `wrangler pages deploy` å‘½ä»¤éƒ¨ç½²

### æ¨èéƒ¨ç½²æµç¨‹
```bash
# 1. æ„å»ºåº”ç”¨
npm run build

# 2. éªŒè¯æ„å»º
NEXT_PUBLIC_APP_URL=https://your-domain.pages.dev node scripts/build-validator.js

# 3. éƒ¨ç½²åˆ° Cloudflare Pages
npx wrangler pages deploy .next --project-name=growagarden
```

## ğŸ“‹ ç¯å¢ƒå˜é‡é…ç½®

åœ¨ Cloudflare Pages æ§åˆ¶å°ä¸­éœ€è¦é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

### å¿…éœ€å˜é‡
- `NEXT_PUBLIC_APP_URL`: åº”ç”¨çš„å…¬å¼€ URL

### å¯é€‰å˜é‡
- `GOOGLE_AI_API_KEY`: Google AI API å¯†é’¥ï¼ˆç”¨äº Gemini åŠŸèƒ½ï¼‰
- `SENTRY_ORG`: Sentry ç»„ç»‡åç§°
- `SENTRY_PROJECT`: Sentry é¡¹ç›®åç§°

## ğŸŠ æ€»ç»“

ç¬¬ä¸€é˜¶æ®µçš„ Cloudflare Pages éƒ¨ç½²é…ç½®å·²ç»å®Œæˆï¼åº”ç”¨ç°åœ¨å…·å¤‡äº†ï¼š

- âœ… **å®Œæ•´çš„ Cloudflare Pages é…ç½®**
- âœ… **Edge Runtime å…¼å®¹æ€§**
- âœ… **æ€§èƒ½ä¼˜åŒ–è®¾ç½®**
- âœ… **è‡ªåŠ¨åŒ–æ„å»ºå’ŒéªŒè¯å·¥å…·**
- âœ… **å®‰å…¨å¤´å’Œç¼“å­˜ç­–ç•¥**

è™½ç„¶ next-on-pages å·¥å…·å­˜åœ¨ä¸€ä¸ªå·²çŸ¥çš„é‡å¤æ ‡è¯†ç¬¦é—®é¢˜ï¼Œä½†è¿™ä¸å½±å“å®é™…éƒ¨ç½²ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼ï¼ˆå¦‚ç›´æ¥ä¸Šä¼ æ„å»ºè¾“å‡ºæˆ–ä½¿ç”¨ GitHub é›†æˆï¼‰æ¥éƒ¨ç½²åº”ç”¨ã€‚

**åº”ç”¨å·²ç»å‡†å¤‡å¥½éƒ¨ç½²åˆ° Cloudflare Pagesï¼** ğŸš€